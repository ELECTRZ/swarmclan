# SwarmClan Tekken 8 Stats Website

–≠—Ç–æ —Å–∞–π—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ Tekken 8 –¥–ª—è –∫–ª–∞–Ω–∞ SWARM ‚Äî https://swarmclan.ru  
–ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Ö –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü, –ø—Ä–æ—Ñ–∏–ª–µ–π –∏–≥—Ä–æ–∫–æ–≤ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js (App Router)** ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **TypeScript** ‚Äî –≤–µ—Å—å –∫–æ–¥
- **MySQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **aaPanel** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º
- **pm2** ‚Äî –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ —Ñ–æ–Ω–µ
- **Vercel / VPS** ‚Äî —Ö–æ—Å—Ç–∏–Ω–≥
- **Tailwind CSS** ‚Äî —Å—Ç–∏–ª–∏

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

/app
/page.tsx ‚Üê –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
/leaderboard ‚Üê –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ (–≤—Å—è –†–æ—Å—Å–∏—è)
/player/[id] ‚Üê –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞
/characters ‚Üê –¢–æ–ø –∏–≥—Ä–æ–∫–∏ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º
/api
/leaderboard ‚Üê API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ –∫–µ—à–∞
/add-player ‚Üê API –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–±—è –ø–æ Polaris ID

/components
RankDistribution.tsx ‚Üê –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ä–∞–Ω–≥–∞–º
AddPlayerModal.tsx ‚Üê –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞"

/scripts
update-leaderboard-cache.ts ‚Üê –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞ —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç

markdown
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (MySQL)

–¢–∞–±–ª–∏—Ü—ã:

- `replays` ‚Äî –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –±–æ–∏ –∏–∑ `https://wank.wavu.wiki/api/replays`
- `added_players` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–±–∞–≤–∏–≤—à–∏–µ —Å–µ–±—è (–ø–æ polaris_id)
- `leaderboard_cache` ‚Äî –≥–æ—Ç–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç

## üîÅ –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ Node.js (`fetch-replay.ts`) –∫–∞–∂–¥—ã–µ 700 —Å–µ–∫—É–Ω–¥ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–ø–ª–µ–∏ –≤ —Ç–∞–±–ª–∏—Ü—É `replays`.  
–ö–µ—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º `update-leaderboard-cache.ts` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `pm2` –ø–æ CRON —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç.

## üß† –õ–æ–≥–∏–∫–∞ API

### /api/leaderboard

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–ø-–∏–≥—Ä–æ–∫–æ–≤:

- —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö, —É –∫–æ–≥–æ —è–∑—ã–∫ `ru` **–∏–ª–∏** –∫—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `/api/add-player`
- –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç p1 –∏ p2 –∏–≥—Ä–æ–∫–æ–≤
- –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ polaris_id
- –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π —Ä–∞–Ω–≥ –∏ –ª—é–±–∏–º–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

### /api/add-player

–î–æ–±–∞–≤–ª—è–µ—Ç `polaris_id` –≤ —Ç–∞–±–ª–∏—Ü—É `added_players`, –µ—Å–ª–∏ –æ–Ω –Ω–∞–π–¥–µ–Ω –≤ —Ä–µ–ø–ª–µ—è—Ö (–ª–∏–±–æ –∫–∞–∫ p1, –ª–∏–±–æ –∫–∞–∫ p2).  
–ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `status: "exists"`.  
–ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî `status: "not_found"`.

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîç –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –Ω–∏–∫—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- üìà –ì—Ä–∞—Ñ–∏–∫ –ø–æ —Ä–∞–Ω–≥–∞–º
- üïπÔ∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/characters` —Å —Ç–æ–ø-3 –∏–≥—Ä–æ–∫–∞–º–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–µ—Ä—Å–æ–Ω–∞–∂—É
- ‚è±Ô∏è –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –∫ –∫–µ—à—É, –∞ –Ω–µ –∫ —Ä–µ–ø–ª–µ—è–º ‚Äî —ç—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–∞–π—Ç

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
npm install
npm run build
pm2 start "npx tsx scripts/update-leaderboard-cache.ts" --name update-leaderboard-cache --cron "*/5 * * * *"
pm2 save